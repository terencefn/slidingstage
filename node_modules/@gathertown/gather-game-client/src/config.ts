// Meant to be replaced at compile time by Webpack
// by `EnvironmentPlugin` from modules that will import this
// or default to `window.location.origin` for backward compatibility

export const API_BASE_PATH =
  // if env var exists, use that
  process.env.API_BASE_PATH
    ? `https://${process.env.API_BASE_PATH}`
    : // else if window exists, use that
    typeof window !== "undefined"
    ? window.location.origin
    : // else use the env
    process.env.ENVIRONMENT === "prod"
    ? "https://api.gather.town"
    : process.env.ENVIRONMENT === "staging"
    ? "https://api.staging.gather.town"
    : process.env.ENVIRONMENT === "local"
    ? "http://localhost:3000"
    : process.env.ENVIRONMENT === "dev"
    ? // if it's dev, build up the correct api url
      `https://api-${process.env.GAME_SERVER_POOL ?? process.env.GIT_BRANCH}.dev.k8s.gather.town`
    : // otherwise... probably a 3rd party. use prod
      "https://api.gather.town";
